"0","knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE, fig.align = ""center"")"
"0",""
"0","library(tidyverse)"
"0","library(ggplot2)"
"0","library(ggmap)"
"0","library(purrr)"
"0","library(dplyr)"
"0","library(showtext)"
"0","library(onphaTheme)"
"0","library(ggtext)"
"0","library(ggiraph)"
"0","library(htmltools)"
"0","library(htmlwidgets)"
"0","library(sf)"
"0","library(leaflet)"
"0","library(fuzzyjoin)"
"0",""
"0",""
"0","  # Set fonts"
"0","  sysfonts::font_add_google(""Gabarito"", ""gabarito"", db_cache = FALSE)"
"0","  showtext::showtext_auto() "
"0","  font_family <- ""gabarito"""
"0","  font_colour <- ""#282828"""
"0",""
"0","darker_gray_colour <- ""#5f5f5f"""
"0"," gray_colour <- ""#BFBFBF"""
"0","   purple_gradient <- c(""#c9c3ff"", ""#a092ff"", ""#8661eb"", ""#5e24b3"", ""#37007B"")"
"0","  green_gradient <- c(""#b6fc77"", ""#56d444"", ""#35a626"", ""#2b8520"", ""#26661f"")"
"0","  distinctive_palette <- c(""#D30C55"", ""#FCBCDA"", ""#FF8004"", ""#F9C606"")"
"0",""
"0","custom_theme <- theme_bw() +"
"0","  theme("
"0","    #axis.text.x = element_text(angle = 0, hjust = 0.5, size = 12),"
"0","    #plot.title = element_text(hjust = 0.5, size = 16),"
"0","   # axis.text.y = element_text(size = 10),"
"0","     plot.margin = margin(8, 8, 8, 8),"
"0","      plot.title = element_text(size = 20, lineheight = 0.5, face = ""bold"", margin = margin(0, 0, 6, 0)),"
"0","      plot.title.position = ""plot"","
"0","      #plot.caption = element_text(colour = darker_gray_colour, size = 12, margin = margin(6, 4, 2, 20), hjust = 0),"
"0","      #plot.caption.position = ""plot"","
"0","      axis.title.x = element_text(face = ""bold"", size = 18, margin = margin(6, 0, 0, 0), lineheight = 0.5, hjust = 0.5, angle = 0),"
"0","      axis.title.y = element_text(face = ""bold"", size = 18, margin = margin(0, 6, 0, 0), lineheight = 0.5, hjust = 0.5),"
"0","      axis.text.x = element_text(face = ""plain"", size = 18, lineheight = 0.5),"
"0","      axis.text.y = element_text(face = ""plain"", size = 16),"
"0","      axis.ticks.x = element_line(colour = gray_colour, linewidth = 0.25),"
"0","      axis.ticks.length = unit(0, ""mm""),"
"0","      axis.line.x = element_line(linewidth = 0.25, colour = gray_colour), "
"0","      text = element_text(colour = font_colour),"
"0","    # axis.title.x = element_blank(),"
"0","    legend.text = element_text(size=14),"
"0","    legend.title = element_text(size=14, face = ""bold""),"
"0","    plot.caption = ggtext::element_markdown(size = 14, hjust = 0, color = ""grey50"", margin = margin(t = 10, l = 5)),"
"0","         strip.text = element_text(size = 18))  + "
"0","  #scale_y_continuous(labels = scales::comma) +"
"0","  labs("
"0","    x = element_blank())"
"0",""
"0","custom_theme_grid <- theme_bw(base_size = 26) +"
"0","  theme("
"0","    #axis.text.x = element_text(angle = 0, hjust = 0.5, size = 12),"
"0","    #plot.title = element_text(hjust = 0.5, size = 16),"
"0","   # axis.text.y = element_text(size = 10),"
"0","     plot.margin = margin(8, 8, 0, 8),"
"0","      plot.title = element_text(size = 30, lineheight = 0.9, face = ""bold"", margin = margin(0, 0, 6, 0)),"
"0","      plot.title.position = ""plot"","
"0","      #plot.caption = element_text(colour = darker_gray_colour, size = 12, margin = margin(6, 4, 2, 20), hjust = 0),"
"0","      #plot.caption.position = ""plot"","
"0","      #axis.title.x = element_text(face = ""plain"", size = 24, margin = margin(6, 0, 0, 0), lineheight = 0.9, hjust = 0.5, angle = 0),"
"0","      axis.title.x = element_blank(),"
"0","      axis.title.y = element_text(face = ""plain"", size = 26, margin = margin(0, 6, 0, 0), lineheight = 0.9, hjust = 0.5),"
"0","      axis.text.x = element_text(face = ""plain"", size = 20, lineheight = 0.9),"
"0","      axis.text.y = element_text(face = ""plain"", size = 18),"
"0","      axis.ticks.x = element_line(colour = gray_colour, linewidth = 0.25),"
"0","      axis.ticks.length = unit(0, ""mm""),"
"0","      axis.line.x = element_line(linewidth = 0.25, colour = gray_colour), "
"0","      text = element_text(colour = font_colour),"
"0","    # axis.title.x = element_blank(),"
"0","    legend.text = element_text(size=22),"
"0","    legend.title = element_text(size=22, face = ""bold""),"
"0","    plot.caption = ggtext::element_markdown(size = 14, hjust = 0, color = ""grey50"", margin = margin(t = 10, l = 5)),"
"0","         strip.text = element_text(size = 24))  + "
"0","  #scale_y_continuous(labels = scales::comma) +"
"0","  labs("
"0","    x = element_blank())"
"0",""
"0",""
"0",""
"0","custom_theme_widget <- theme_bw() +"
"0","  theme("
"0","    #axis.text.x = element_text(angle = 0, hjust = 0.5, size = 12),"
"0","    #plot.title = element_text(hjust = 0.5, size = 16),"
"0","   # axis.text.y = element_text(size = 10),"
"0","     plot.margin = margin(12, 12, 4, 12),"
"0","      plot.title = element_text(size = 13, lineheight = 0.9, face = ""bold"", margin = margin(0, 0, 6, 0)),"
"0","      plot.title.position = ""plot"","
"0","      #plot.caption = element_text(colour = darker_gray_colour, size = 12, margin = margin(6, 4, 2, 20), hjust = 0),"
"0","      #plot.caption.position = ""plot"","
"0","      #axis.title.x = element_text(face = ""plain"", size = 24, margin = margin(6, 0, 0, 0), lineheight = 0.9, hjust = 0.5, angle = 0),"
"0","      axis.title.x = element_blank(),"
"0","      axis.title.y = element_text(face = ""bold"", size = 12, margin = margin(0, 6, 0, 0), lineheight = 0.9, hjust = 0.5),"
"0","axis.text.x = element_text(face = ""plain"", size = 11, lineheight = 0.4, "
"0","                           margin = margin(t = 4)),  # Adds 4 pts of space above text"
"0","      axis.text.y = element_text(face = ""plain"", size = 10),"
"0","      axis.ticks.x = element_line(colour = gray_colour, linewidth = 0.25),"
"0","      axis.ticks.length = unit(0, ""mm""),"
"0","      axis.line.x = element_line(linewidth = 0.25, colour = gray_colour), "
"0","      text = element_text(colour = font_colour),"
"0","    # axis.title.x = element_blank(),"
"0","    legend.text = element_text(size=11),"
"0","    legend.title = element_text(size=11, face = ""bold""),"
"0","    plot.caption = ggtext::element_markdown(size = 10, hjust = 0, color = ""grey50"", margin = margin(t = 10, l = 5)),"
"0","         strip.text = element_text(size = 12))  + "
"0","  #scale_y_continuous(labels = scales::comma) +"
"0","  labs("
"0","    x = element_blank())"
"0",""
"0","lab_size_widget <- 4"
"0",""
"0",""
"0",""
"0","grid_text_change <- 8"
"0",""
"0","custom_theme_widget_grid <- theme_bw() +"
"0","  theme("
"0","    #axis.text.x = element_text(angle = 0, hjust = 0.5, size = 12),"
"0","    #plot.title = element_text(hjust = 0.5, size = 16),"
"0","   # axis.text.y = element_text(size = 10),"
"0","     plot.margin = margin(8, 8, 0, 8),"
"0","      plot.title = element_text(size = 20 + grid_text_change, lineheight = 0.5, face = ""bold"", margin = margin(0, 0, 6, 0)),"
"0","      plot.title.position = ""plot"","
"0","      #plot.caption = element_text(colour = darker_gray_colour, size = 12, margin = margin(6, 4, 2, 20), hjust = 0),"
"0","      #plot.caption.position = ""plot"","
"0","      #axis.title.x = element_text(face = ""plain"", size = 24, margin = margin(6, 0, 0, 0), lineheight = 0.9, hjust = 0.5, angle = 0),"
"0","      axis.title.x = element_blank(),"
"0","      axis.title.y = element_text(face = ""bold"", size = 14 + grid_text_change, margin = margin(0, 6, 0, 0), lineheight = 0.5, hjust = 0.5),"
"0","      axis.text.x = element_text(face = ""plain"", size = 12 + grid_text_change, lineheight = 0.4, "
"0","                           margin = margin(t = 4)),  # Adds 4 pts of space above text"
"0","      axis.text.y = element_text(face = ""plain"", size = 12 + grid_text_change),"
"0","      axis.ticks.x = element_line(colour = gray_colour, linewidth = 0.25),"
"0","      axis.ticks.length = unit(0, ""mm""),"
"0","      axis.line.x = element_line(linewidth = 0.25, colour = gray_colour), "
"0","      text = element_text(colour = font_colour),"
"0","    # axis.title.x = element_blank(),"
"0","    legend.text = element_text(size=14 + grid_text_change),"
"0","    legend.title = element_text(size=14 + grid_text_change, face = ""bold""),"
"0","    plot.caption = ggtext::element_markdown(size = 14 + grid_text_change, hjust = 0, color = ""grey50"", margin = margin(t = 10, l = 5)),"
"0","         strip.text = element_text(size = 14 + grid_text_change))  + "
"0","  #scale_y_continuous(labels = scales::comma) +"
"0","  labs("
"0","    x = element_blank())"
"0",""
"0",""
"0",""
"0",""
"0","highlight_colour = ""#ec008c"""
"0","highlight_colour2 = ""gray30"""
"0","alternate_colour = ""#0693e3"""
"0","alternative <- ""grey65"""
"0",""
"0","onpha_pallette <- c(""#f78da7"",""#0693e3"",""#fcb900"", ""#9b51e0"", ""#ff6900"")"
"0",""
"0","lab_size <- 6"
"0",""
"0","# Read the data"
"0","dat <- readxl::read_excel(""data/NHS Project List - December 2024.xlsx"") |> janitor::clean_names()"
"0",""
"0","# Define the program mapping"
"0","program_mapping <- c("
"0","  ""Affordable Housing Fund"" = ""AHF"","
"0","  ""Rapid Housing Initiative"" = ""RHI"","
"0","  ""Rapid Housing Initiative 2"" = ""RHI"","
"0","  ""Rapid Housing Initiative 3"" = ""RHI"","
"0","  ""Apartment Construction Loan Program"" = ""ACLP"","
"0","  ""Affordable Housing Innovation Fund"" = ""AHIF"","
"0","  ""Affordable Housing Innovation Fund 2.0"" = ""AHIF"","
"0","  ""Federal Land Initiative"" = ""FLI"","
"0","  ""Federal Land Disposition"" = ""FLD"""
"0",")"
"0",""
"0","# Define the province mapping"
"0","province_mapping <- c("
"0","  ""British Columbia"" = ""BC"","
"0","  ""Nova Scotia"" = ""NS"","
"0","  ""Alberta"" = ""AB"","
"0","  ""Ontario"" = ""ON"","
"0","  ""Manitoba"" = ""MB"","
"0","  ""Yukon"" = ""YT"","
"0","  ""Quebec"" = ""QC"","
"0","  ""New Brunswick"" = ""NB"","
"0","  ""Northwest Territories"" = ""NT"","
"0","  ""Nunavut"" = ""NU"","
"0","  ""Newfoundland and Labrador"" = ""NL"","
"0","  ""Saskatchewan"" = ""SK"","
"0","  ""Prince Edward Island"" = ""PE"""
"0",")"
"0",""
"0","# Apply the mappings and clean the data"
"0","dat <- dat |> "
"0","  mutate("
"0","    #Province = str_trim(sub(""^.*,(\\s*)"", """", Location)),"
"0","    province = recode(province_territory_en, !!!province_mapping),"
"0","    program = recode(program_name_en, !!!program_mapping),"
"0","    province = factor(province, levels = c(""BC"", ""AB"", ""SK"", ""MB"", ""ON"", ""QC"", ""NB"", ""NS"", ""PE"", ""NL"", ""YT"", ""NT"", ""NU"")))"
"0",""
"0","cma_boundaries <- cancensus::get_census(""CA21"", regions = list(PR = ""35""), level = ""CMA"", geo_format = ""sf"") |> select(name)"
"2","Census data is currently stored temporarily.

 In order to speed up performance, reduce API quota usage, and reduce unnecessary network calls, please set up a persistent cache directory via `set_cancensus_cache_path('<local cache path>', install = TRUE)`.
 This will add your cache directory as environment varianble to your .Renviron to be used across sessions and projects.


"
"2","Census data is currently stored temporarily.

 In order to speed up performance, reduce API quota usage, and reduce unnecessary network calls, please set up a persistent cache directory via `set_cancensus_cache_path('<local cache path>', install = TRUE)`.
 This will add your cache directory as environment varianble to your .Renviron to be used across sessions and projects.


"
"2","Querying CensusMapper API...
"
"1","Downloading: "
"1",""
"1","33 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","33 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","33 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","33 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","82 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","82 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","98 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","98 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","180 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","180 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","180 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","180 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","210 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","210 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","210 kB"
"1",""
"1","     "
"1","Downloading: "
"1",""
"1","210 kB"
"1",""
"1","     "
